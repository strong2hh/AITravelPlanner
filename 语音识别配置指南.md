# 语音识别功能配置指南

## 麦克风无法识别的问题解决

### 1. 浏览器麦克风权限设置

**Chrome浏览器：**
1. 点击地址栏左侧的锁形图标或摄像头图标
2. 选择"允许"或"始终允许"麦克风访问
3. 刷新页面后重新尝试

**Edge浏览器：**
1. 点击地址栏左侧的摄像头图标
2. 选择"允许"
3. 刷新页面

**Firefox浏览器：**
1. 点击地址栏左侧的图标
2. 选择"允许访问摄像头和麦克风"
3. 点击"保存设置"

### 2. 系统麦克风设置检查

**Windows系统：**
1. 右键点击任务栏音量图标 → 声音设置
2. 检查"输入"设备是否正常工作
3. 确保麦克风未被其他应用程序占用

**macOS系统：**
1. 系统偏好设置 → 安全性与隐私 → 隐私
2. 选择"麦克风"
3. 确保浏览器被授权使用麦克风

### 3. 语音识别服务配置

#### 配置科大讯飞API（可选，用于高级语音识别）

1. 注册科大讯飞开放平台账号：https://www.xfyun.cn/
2. 创建语音听写应用
3. 获取以下参数：
   - APP_ID
   - API_KEY
   - API_SECRET

4. 配置环境变量：
```bash
# Windows PowerShell
$env:VOICE_APP_ID = "您的APP_ID"
$env:VOICE_API_KEY = "您的API_KEY"

# 或者添加到系统环境变量
```

### 4. 常见问题解决

#### 问题1："麦克风权限被拒绝"
**解决方案：**
- 按照上面的权限设置步骤操作
- 清除浏览器缓存和Cookie
- 重启浏览器

#### 问题2："未找到麦克风设备"
**解决方案：**
- 检查麦克风是否已连接
- 检查设备管理器中的音频设备状态
- 尝试使用其他麦克风

#### 问题3："浏览器不支持录音功能"
**解决方案：**
- 使用最新版本的Chrome、Edge或Firefox
- 确保使用HTTPS协议访问网站
- 检查浏览器是否启用了JavaScript

### 5. 测试语音识别功能

1. 打开应用页面
2. 点击语音识别按钮（🎤图标）
3. 如果出现权限弹窗，点击"允许"
4. 开始说话，系统会显示识别结果

### 6. 备用方案

如果语音识别功能仍然无法使用，您可以：
1. 使用键盘直接输入文字
2. 复制粘贴文本内容
3. 使用文件上传功能（如果支持）

### 7. 技术说明

- **支持格式：** audio/webm, audio/mpeg, audio/wav, audio/ogg
- **最大文件大小：** 10MB
- **支持语言：** 中文普通话
- **兼容浏览器：** Chrome 70+, Edge 79+, Firefox 75+, Safari 11+

### 8. 故障排除

如果遇到问题，请按以下步骤检查：

1. 检查浏览器控制台错误信息（F12 → Console）
2. 确认麦克风硬件正常工作
3. 检查网络连接是否正常
4. 查看后端服务日志（如果有访问权限）

**注意：** 语音识别功能需要安全上下文（HTTPS），在本地开发时请确保使用localhost或HTTPS协议。